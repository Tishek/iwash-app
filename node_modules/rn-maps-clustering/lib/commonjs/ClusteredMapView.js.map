{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_reactNativeMaps","_supercluster","_interopRequireDefault","_ClusteredMarker","_helpers","_jsxRuntime","e","__esModule","default","t","WeakMap","r","n","o","i","f","__proto__","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","ClusteredMapView","forwardRef","clusteringEnabled","spiralEnabled","spiderfyOnMaxZoom","animationEnabled","radius","maxZoom","minZoom","minPoints","extent","nodeSize","clusterColor","clusterTextColor","clusterFontFamily","spiderLineColor","edgePadding","top","left","right","bottom","children","onRegionChangeComplete","onClusterPress","renderCluster","tracksViewChanges","restProps","ref","markers","setMarkers","useState","spiderMarkers","setSpiderMarkers","otherChildren","setOtherChildren","clustererRef","useRef","mapRef","width","useWindowDimensions","useImperativeHandle","current","memoizedChildren","useMemo","React","Children","toArray","handleRegionChange","useCallback","region","bbox","calculateBBox","zoom","returnMapZoom","newMarkers","getClusters","Platform","OS","LayoutAnimation","configureNext","Presets","spring","newSpiderMarkers","flatMap","marker","properties","leaves","getLeaves","cluster_id","Infinity","generateSpiral","isGesture","useEffect","markerData","nonMarkerChildren","forEach","child","index","isMarker","push","markerToGeoJSONFeature","SuperCluster","load","initialRegion","handleClusterPress","cluster","coordinates","map","leaf","latitude","geometry","longitude","fitToCoordinates","jsxs","onPress","jsx","id","point","originalMarker","length","cloneElement","key","spiderfiedMarker","Fragment","Polyline","centerPoint","strokeColor","strokeWidth","coordinate","_default","exports","memo"],"sourceRoot":"../../src","sources":["ClusteredMapView.tsx"],"mappings":"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","ignoreList":[]}
